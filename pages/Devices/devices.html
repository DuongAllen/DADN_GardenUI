<div class="devices-container">
  <h1 class="fs-2 fw-bold mb-3 my-neg text-primary-custom">Thi·∫øt b·ªã</h1>

  <!-- Header -->
  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <div class="row g-3 align-items-center">
        <div class="col-md-3">
          <input type="text" class="form-control" id="searchInput" placeholder="T√¨m ki·∫øm thi·∫øt b·ªã...">
        </div>
        <div class="col-md-2">
          <select class="form-select" id="filterType">
            <option value="">T·∫•t c·∫£ lo·∫°i</option>
            <option value="fan">Qu·∫°t</option>
            <option value="led">ƒê√®n</option>
            <option value="pump">B∆°m n∆∞·ªõc</option>
          </select>
        </div>
        <div class="col-md-2">
          <select class="form-select" id="filterStatus">
            <option value="">T·∫•t c·∫£ tr·∫°ng th√°i</option>
            <option value="on">B·∫≠t</option>
            <option value="off">T·∫Øt</option>
          </select>
        </div>
        <div class="col-md-3">
          <button class="btn btn-primary w-100" onclick="openAddDevice()">
            + Th√™m thi·∫øt b·ªã
          </button>
        </div>
        <div class="col-md-2">
          <div class="alert alert-info mb-0 text-center py-2">
            <strong id="totalDevices">0</strong> thi·∫øt b·ªã
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Table (Desktop) -->
  <div class="card shadow-sm d-none d-lg-block mb-4">
    <div class="table-responsive">
      <table class="table table-hover align-middle mb-0">
        <thead class="table-primary">
          <tr>
            <th>ID</th>
            <th>T√™n</th>
            <th>Lo·∫°i</th>
            <th>Feed Name</th>
            <th>Nh√† k√≠nh</th>
            <th>Tr·∫°ng th√°i</th>
            <th>Ng∆∞·ª°ng</th>
            <th>Thao t√°c</th>
          </tr>
        </thead>
        <tbody id="devicesTableBody">
          <!-- Render b·∫±ng JS -->
        </tbody>
      </table>
    </div>
  </div>

  <!-- Cards (Mobile/Tablet) -->
  <div class="d-lg-none">
    <div class="row g-3" id="devicesCardsContainer">
      <!-- Render b·∫±ng JS -->
    </div>
  </div>

  <!-- Pagination -->
  <nav class="mt-4" aria-label="Device pagination">
    <ul class="pagination justify-content-center">
      <li class="page-item" id="prevPageItem">
        <button class="page-link" id="prevPage">&laquo; Tr∆∞·ªõc</button>
      </li>
      <li class="page-item disabled">
        <span class="page-link" id="pageInfo">Trang 1</span>
      </li>
      <li class="page-item" id="nextPageItem">
        <button class="page-link" id="nextPage">Sau &raquo;</button>
      </li>
    </ul>
  </nav>

  <!-- Empty State -->
  <div id="emptyState" class="text-center py-5 d-none">
    <div class="text-muted">
      <i class="bi bi-inbox" style="font-size: 3rem;"></i>
      <p class="mt-3">Kh√¥ng c√≥ thi·∫øt b·ªã n√†o</p>
    </div>
  </div>
</div>

<!-- Modal x√°c nh·∫≠n x√≥a -->
<div class="modal fade" id="deleteConfirmModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title">‚ö†Ô∏è X√°c nh·∫≠n x√≥a</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <p class="mb-0">B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a thi·∫øt b·ªã <strong id="deleteDeviceName"></strong>?</p>
        <p class="text-muted small mt-2 mb-0">H√†nh ƒë·ªông n√†y kh√¥ng th·ªÉ ho√†n t√°c.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">H·ªßy</button>
        <button type="button" class="btn btn-danger" id="confirmDeleteBtn">X√≥a thi·∫øt b·ªã</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="thresholdModal" tabindex="-1">
  <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title">‚öôÔ∏è Thi·∫øt l·∫≠p ng∆∞·ª°ng</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <form id="thresholdForm">
          <input type="hidden" id="deviceId">
          
          <div class="mb-3">
            <label class="form-label fw-bold">Thi·∫øt b·ªã</label>
            <input type="text" class="form-control" id="deviceName" readonly>
          </div>

          <div class="threshold-section mb-3" data-sensor="temp">
            <h6 class="fw-bold text-primary">üå°Ô∏è Nhi·ªát ƒë·ªô</h6>
            <div class="row g-2">
              <div class="col-md-6">
                <label class="form-label small">Ng∆∞·ª°ng t·ªëi thi·ªÉu (¬∞C)</label>
                <input type="number" class="form-control form-control-sm" id="temp_min" step="0.1" placeholder="VD: 20">
                <select class="form-select form-select-sm mt-1" id="temp_min_mode">
                  <option value="">Kh√¥ng thao t√°c</option>
                  <option value="on">B·∫≠t thi·∫øt b·ªã</option>
                  <option value="off">T·∫Øt thi·∫øt b·ªã</option>
                </select>
              </div>
              <div class="col-md-6">
                <label class="form-label small">Ng∆∞·ª°ng t·ªëi ƒëa (¬∞C)</label>
                <input type="number" class="form-control form-control-sm" id="temp_max" step="0.1" placeholder="VD: 35">
                <select class="form-select form-select-sm mt-1" id="temp_max_mode">
                  <option value="">Kh√¥ng thao t√°c</option>
                  <option value="on">B·∫≠t thi·∫øt b·ªã</option>
                  <option value="off">T·∫Øt thi·∫øt b·ªã</option>
                </select>
              </div>
            </div>
          </div>

          <div class="threshold-section mb-3" data-sensor="humidity">
            <h6 class="fw-bold text-primary">üíß ƒê·ªô ·∫©m kh√¥ng kh√≠</h6>
            <div class="row g-2">
              <div class="col-md-6">
                <label class="form-label small">Ng∆∞·ª°ng t·ªëi thi·ªÉu (%)</label>
                <input type="number" class="form-control form-control-sm" id="humidity_min" step="1" placeholder="VD: 40">
                <select class="form-select form-select-sm mt-1" id="humidity_min_mode">
                  <option value="">Kh√¥ng thao t√°c</option>
                  <option value="on">B·∫≠t thi·∫øt b·ªã</option>
                  <option value="off">T·∫Øt thi·∫øt b·ªã</option>
                </select>
              </div>
              <div class="col-md-6">
                <label class="form-label small">Ng∆∞·ª°ng t·ªëi ƒëa (%)</label>
                <input type="number" class="form-control form-control-sm" id="humidity_max" step="1" placeholder="VD: 80">
                <select class="form-select form-select-sm mt-1" id="humidity_max_mode">
                  <option value="">Kh√¥ng thao t√°c</option>
                  <option value="on">B·∫≠t thi·∫øt b·ªã</option>
                  <option value="off">T·∫Øt thi·∫øt b·ªã</option>
                </select>
              </div>
            </div>
          </div>

          <div class="threshold-section mb-3" data-sensor="light">
            <h6 class="fw-bold text-primary">üí° √Ånh s√°ng</h6>
            <div class="row g-2">
              <div class="col-md-6">
                <label class="form-label small">Ng∆∞·ª°ng t·ªëi thi·ªÉu (lux)</label>
                <input type="number" class="form-control form-control-sm" id="light_min" step="1" placeholder="VD: 300">
                <select class="form-select form-select-sm mt-1" id="light_min_mode">
                  <option value="">Kh√¥ng thao t√°c</option>
                  <option value="on">B·∫≠t thi·∫øt b·ªã</option>
                  <option value="off">T·∫Øt thi·∫øt b·ªã</option>
                </select>
              </div>
              <div class="col-md-6">
                <label class="form-label small">Ng∆∞·ª°ng t·ªëi ƒëa (lux)</label>
                <input type="number" class="form-control form-control-sm" id="light_max" step="1" placeholder="VD: 1000">
                <select class="form-select form-select-sm mt-1" id="light_max_mode">
                  <option value="">Kh√¥ng thao t√°c</option>
                  <option value="on">B·∫≠t thi·∫øt b·ªã</option>
                  <option value="off">T·∫Øt thi·∫øt b·ªã</option>
                </select>
              </div>
            </div>
          </div>

          <div class="threshold-section mb-3" data-sensor="soil_moisture">
            <h6 class="fw-bold text-primary">üå± ƒê·ªô ·∫©m ƒë·∫•t</h6>
            <div class="row g-2">
              <div class="col-md-6">
                <label class="form-label small">Ng∆∞·ª°ng t·ªëi thi·ªÉu (%)</label>
                <input type="number" class="form-control form-control-sm" id="soil_moisture_min" step="1" placeholder="VD: 30">
                <select class="form-select form-select-sm mt-1" id="soil_moisture_min_mode">
                  <option value="">Kh√¥ng thao t√°c</option>
                  <option value="on">B·∫≠t thi·∫øt b·ªã</option>
                  <option value="off">T·∫Øt thi·∫øt b·ªã</option>
                </select>
              </div>
              <div class="col-md-6">
                <label class="form-label small">Ng∆∞·ª°ng t·ªëi ƒëa (%)</label>
                <input type="number" class="form-control form-control-sm" id="soil_moisture_max" step="1" placeholder="VD: 70">
                <select class="form-select form-select-sm mt-1" id="soil_moisture_max_mode">
                  <option value="">Kh√¥ng thao t√°c</option>
                  <option value="on">B·∫≠t thi·∫øt b·ªã</option>
                  <option value="off">T·∫Øt thi·∫øt b·ªã</option>
                </select>
              </div>
            </div>
          </div>

          <div class="d-flex gap-2 pt-3 border-top">
            <button type="button" class="btn btn-secondary flex-fill" data-bs-dismiss="modal">H·ªßy</button>
            <button type="submit" class="btn btn-primary flex-fill">L∆∞u c·∫•u h√¨nh</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>