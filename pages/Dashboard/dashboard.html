<div class="dashboard-container">
  <h1 class="fs-2 fw-bold mb-3 my-neg text-primary-custom">Th·ªëng k√™</h1>

  <!-- Top Cards -->
  <div class="row g-3 mb-4">
    <div class="col-lg-6">
      <div class="card shadow-sm border-primary-custom border-2">
        <div class="card-header bg-primary-custom text-white d-flex justify-content-between align-items-center">
          <h5 class="mb-0">
            <img src="../../assets/analytics.png" style="width:22px; height:22px; vertical-align:middle; margin-right:4px; margin-top: -2px;">D·ªØ li·ªáu c·∫£m bi·∫øn
          </h5>
          <button class="btn btn-light btn-sm" onclick="viewAllSensorData()">Xem t·∫•t c·∫£ ‚Üí</button>
        </div>
        <div class="card-body">
          <div class="mb-3">
            <span class="display-6 text-primary-custom fw-bold" id="sensorDataCount">0</span>
            <span class="text-muted ms-2">b·∫£n ghi h√¥m nay</span>
          </div>
          <div class="overflow-auto" style="max-height: 200px;" id="recentSensorLogs">
            <!-- Render b·∫±ng JS -->
          </div>
        </div>
      </div>
    </div>

    <div class="col-lg-6">
      <div class="card shadow-sm border-primary-custom border-2">
        <div class="card-header bg-primary-custom text-white d-flex justify-content-between align-items-center">
          <h5 class="mb-0">
            <img src="../../assets/bell.png" style="width:22px; height:22px; vertical-align:middle; margin-right:4px; margin-top: -2px;">C·∫£nh b√°o
          </h5>
          <button class="btn btn-light btn-sm" onclick="viewAllNotifications()">Xem t·∫•t c·∫£ ‚Üí</button>
        </div>
        <div class="card-body">
          <div class="mb-3">
            <span class="display-6 text-primary-custom fw-bold" id="notificationCount">0</span>
            <span class="text-muted ms-2">c·∫£nh b√°o ch∆∞a ƒë·ªçc</span>
          </div>
          <div class="overflow-auto" style="max-height: 200px;" id="recentNotifications">
            <!-- Render b·∫±ng JS -->
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Stats Grid -->
  <div class="mb-4">
    <h2 class="fs-3 fw-bold mb-3 text-primary-custom">Th√¥ng s·ªë h√¥m nay</h2>
    <div class="row g-3">
      <div class="col-sm-6 col-lg-3">
        <div class="card shadow-sm">
          <div class="card-body d-flex align-items-center">
            <div class="fs-1 me-3"> <img src="../../assets/thermometer.png" style="width:40px; height:40px; margin-top: -4px;" ></div>
            <div>
              <div class="text-muted small">Nhi·ªát ƒë·ªô TB</div>
              <div class="fs-4 fw-bold text-primary-custom" id="avgTemp">--¬∞C</div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-sm-6 col-lg-3">
        <div class="card shadow-sm">
          <div class="card-body d-flex align-items-center">
            <div class="fs-1 me-3"> <img src="../../assets/humidity.png" style="width:40px; height:40px; margin-top: -4px;"></div>
            <div>
              <div class="text-muted small">ƒê·ªô ·∫©m TB</div>
              <div class="fs-4 fw-bold text-primary-custom" id="avgHumidity">--%</div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-sm-6 col-lg-3">
        <div class="card shadow-sm">
          <div class="card-body d-flex align-items-center">
            <div class="fs-1 me-3"> <img src="../../assets/lightbulb.png" style="width:40px; height:40px; margin-top: -10px;"></div>
            <div>
              <div class="text-muted small">√Ånh s√°ng TB</div>
              <div class="fs-4 fw-bold text-primary-custom" id="avgLight">-- lux</div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-sm-6 col-lg-3">
        <div class="card shadow-sm">
          <div class="card-body d-flex align-items-center">
            <div class="fs-1 me-3"> <img src="../../assets/sprout.png" style="width:40px; height:40px; margin-top: -4px;"></div>
            <div>
              <div class="text-muted small">ƒê·ªô ·∫©m ƒë·∫•t TB</div>
              <div class="fs-4 fw-bold text-primary-custom" id="avgSoil">--%</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Chart -->
  <div class="mb-4">
    <h2 class="fs-3 fw-bold mb-3 text-primary-custom">Nhi·ªát ƒë·ªô trong tu·∫ßn</h2>
    <div class="card shadow-sm">
      <div class="card-body">
        <canvas id="tempChart"></canvas>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="sensorDataModal" tabindex="-1">
  <div class="modal-dialog modal-xl modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header bg-primary-custom text-white">
        <h5 class="modal-title">üìä T·∫•t c·∫£ d·ªØ li·ªáu c·∫£m bi·∫øn</h5>
        <button type="button" class="btn-close btn-close-white" onclick="closeModal('sensorDataModal')"></button>
      </div>
      <div class="modal-body">
        <div class="row g-2 mb-3">
          <div class="col-md-6">
            <select class="form-select" id="sensorTypeFilter">
              <option value="">T·∫•t c·∫£ lo·∫°i c·∫£m bi·∫øn</option>
              <option value="temp">Nhi·ªát ƒë·ªô</option>
              <option value="humidity">ƒê·ªô ·∫©m</option>
              <option value="light">√Ånh s√°ng</option>
              <option value="soil_moisture">ƒê·ªô ·∫©m ƒë·∫•t</option>
            </select>
          </div>
          <div class="col-md-6">
            <select class="form-select" id="farmFilter">
              <option value="">T·∫•t c·∫£ nh√† k√≠nh</option>
              <option value="1">Nh√† k√≠nh A</option>
              <option value="2">Nh√† k√≠nh B</option>
            </select>
          </div>
        </div>
        <div class="table-responsive">
          <table class="table table-striped table-hover">
            <thead class="table-primary-custom">
              <tr>
                <th>ID</th>
                <th>Nh√† k√≠nh</th>
                <th>Lo·∫°i c·∫£m bi·∫øn</th>
                <th>Gi√° tr·ªã</th>
                <th>Th·ªùi gian</th>
              </tr>
            </thead>
            <tbody id="sensorDataTableBody"></tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="notificationsModal" tabindex="-1">
  <div class="modal-dialog modal-xl modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header bg-primary-custom text-white">
        <h5 class="modal-title">üîî T·∫•t c·∫£ c·∫£nh b√°o</h5>
        <button type="button" class="btn-close btn-close-white" onclick="closeModal('notificationsModal')"></button>
      </div>
      <div class="modal-body">
        <div class="row g-2 mb-3">
          <div class="col-md-6">
            <select class="form-select" id="notifTypeFilter">
              <option value="">T·∫•t c·∫£ lo·∫°i c·∫£m bi·∫øn</option>
              <option value="temp">Nhi·ªát ƒë·ªô</option>
              <option value="humidity">ƒê·ªô ·∫©m</option>
              <option value="light">√Ånh s√°ng</option>
              <option value="soil_moisture">ƒê·ªô ·∫©m ƒë·∫•t</option>
            </select>
          </div>
          <div class="col-md-6">
            <select class="form-select" id="notifStatusFilter">
              <option value="">T·∫•t c·∫£ tr·∫°ng th√°i</option>
              <option value="unread">Ch∆∞a ƒë·ªçc</option>
              <option value="read">ƒê√£ ƒë·ªçc</option>
            </select>
          </div>
        </div>
        <div class="table-responsive">
          <table class="table table-striped table-hover">
            <thead class="table-primary-custom">
              <tr>
                <th>ID</th>
                <th>Nh√† k√≠nh</th>
                <th>Lo·∫°i c·∫£m bi·∫øn</th>
                <th>Gi√° tr·ªã</th>
                <th>Lo·∫°i ng∆∞·ª°ng</th>
                <th>Th·ªùi gian</th>
                <th>Tr·∫°ng th√°i</th>
                <th>Thao t√°c</th>
              </tr>
            </thead>
            <tbody id="notificationsTableBody"></tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>