<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quên Mật khẩu | Ứng dụng</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        body {
            background-color: #f8f9fa;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .phone-mockup {
            width: 100%;
            max-width: 420px;
            background: white;
            border-radius: 40px;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            position: relative;
            min-height: 800px;
        }

        .header-bar {
            padding: 15px 25px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid #eee;
        }

        .header-bar .time {
            font-weight: bold;
        }

        .header-bar .back-icon {
            cursor: pointer;
        }
        
        .content-step {
            padding: 30px 25px;
            display: none;
        }
        
        .content-step.active {
            display: block;
        }

        .title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .subtitle {
            font-size: 16px;
            color: #6c757d;
            margin-bottom: 30px;
        }

        .btn-primary {
            background-color: #4A4AFA;
            border-color: #4A4AFA;
            font-weight: bold;
            padding: 12px 0;
            border-radius: 8px;
            width: 100%;
        }

        .form-control {
            border-radius: 8px;
            height: 55px;
            padding-left: 15px;
        }

        .otp-input-container {
            display: flex;
            justify-content: space-between;
            gap: 10px;
            margin-bottom: 30px;
        }

        .otp-input {
            width: 50px;
            height: 50px;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            border: 1px solid #ced4da;
            border-radius: 8px;
        }

        .resend-link {
            text-align: center;
            margin-top: 15px;
            font-size: 0.9em;
        }

        .success-screen {
            text-align: center;
            padding-top: 50px;
        }

        .success-icon-container {
            width: 80px;
            height: 80px;
            border: 2px solid #4A4AFA;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 30px;
        }

        .success-icon {
            color: #4A4AFA;
            font-size: 40px;
        }

        .success-text {
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>

    <div class="phone-mockup">
        <div class="header-bar">
            <span class="back-icon" id="backButton" onclick="goBack()">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-arrow-left" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8"/>
                </svg>
            </span>
        </div>

        <div class="content-step active" id="step1">
            <h1 class="title">Quên mật khẩu</h1>
            <p class="subtitle">Vui lòng nhập email của bạn để reset mật khẩu</p>

            <form id="formStep1">
                <div class="mb-3">
                    <label for="email" class="form-label text-secondary">Your Email</label>
                    <input type="email" class="form-control" id="email" value="nguyenvana@gmail.com" required>
                </div>
                <button type="submit" class="btn btn-primary mt-4">Reset password</button>
            </form>
        </div>

        <div class="content-step" id="step2">
            <h1 class="title">Kiểm tra email</h1>
            <p class="subtitle">We sent a reset link to nguyenvana@gmail.com. com enter 5 digit code that mentioned in the email</p>

            <form id="formStep2">
                <div class="otp-input-container">
                    <input type="tel" class="otp-input" maxlength="1" value="9" required>
                    <input type="tel" class="otp-input" maxlength="1" value="0" required>
                    <input type="tel" class="otp-input" maxlength="1" value="7" required>
                    <input type="tel" class="otp-input" maxlength="1" value="3" required>
                    <input type="tel" class="otp-input" maxlength="1" value="1" required>
                </div>
                
                <button type="submit" class="btn btn-primary">Verify code</button>

                <p class="resend-link text-center">
                    <span class="text-secondary">Chưa nhận được?</span> 
                    <a href="#" class="text-primary text-decoration-none">Resend code</a>
                </p>
            </form>
        </div>

        <div class="content-step" id="step3">
            <h1 class="title">Lập mật khẩu mới</h1>
            <p class="subtitle">Create a new password. Ensure it is differs from previous one for security.</p>

            <form id="formStep3">
                <div class="mb-3">
                    <label for="newPassword" class="form-label">Mật khẩu mới</label>
                    <input type="password" class="form-control" id="newPassword" value="••••••••••" required>
                </div>
                <div class="mb-3">
                    <label for="confirmPassword" class="form-label">Xác nhận mật khẩu</label>
                    <input type="password" class="form-control" id="confirmPassword" value="••••••••••" required>
                </div>

                <button type="submit" class="btn btn-primary mt-4">Cập nhật mật khẩu</button>
            </form>
        </div>

        <div class="content-step" id="step4">
            <div class="success-screen">
                <div class="success-icon-container">
                    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="#4A4AFA" class="bi bi-check" viewBox="0 0 16 16">
                        <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425z"/>
                    </svg>
                </div>
                <p class="success-text">Thành công</p>
                <p class="text-secondary mb-5">
                    Chúc mừng mật khẩu của bạn đã được đổi. <br>
                    Nhấn tiếp tục để quay về trang đăng nhập.
                </p>
                <button type="button" class="btn btn-primary" onclick="goToLoginPage()">Tiếp tục</button>
            </div>
        </div>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <script>
        let currentStep = 1;
        const totalSteps = 4;
        const steps = [
            document.getElementById('step1'),
            document.getElementById('step2'),
            document.getElementById('step3'),
            document.getElementById('step4')
        ];

        function showStep(stepNumber) {
            steps.forEach((step, index) => {
                if (index + 1 === stepNumber) {
                    step.classList.add('active');
                } else {
                    step.classList.remove('active');
                }
            });
            currentStep = stepNumber;
        }

        function goBack() {
            if (currentStep > 1) {
                showStep(currentStep - 1);
            } else {
                // CHUYỂN HƯỚNG VỀ login.html khi nhấn nút quay lại ở Bước 1
                window.location.href = 'login.html'; 
            }
        }

        function goToLoginPage() {
            // CHUYỂN HƯỚNG VỀ login.html khi nhấn nút Tiếp tục ở Bước 4
            window.location.href = 'login.html'; 
        }

        document.getElementById('formStep1').addEventListener('submit', function(e) {
            e.preventDefault();
            console.log('Đã gửi yêu cầu reset mật khẩu.');
            showStep(2);
        });

        document.getElementById('formStep2').addEventListener('submit', function(e) {
            e.preventDefault();
            const otpInputs = document.querySelectorAll('.otp-input-container .otp-input');
            let otpCode = '';
            otpInputs.forEach(input => otpCode += input.value);
            console.log('Mã OTP đã nhập:', otpCode);
            showStep(3);
        });

        document.getElementById('formStep3').addEventListener('submit', function(e) {
            e.preventDefault();
            const newPass = document.getElementById('newPassword').value;
            const confirmPass = document.getElementById('confirmPassword').value;

            if (newPass !== confirmPass) {
                alert('Mật khẩu mới và xác nhận mật khẩu không khớp!');
                return;
            }
            console.log('Đã cập nhật mật khẩu mới.');
            showStep(4);
        });

        const otpInputs = document.querySelectorAll('.otp-input');
        otpInputs.forEach((input, index) => {
            input.addEventListener('input', (e) => {
                if (e.target.value.length === 1 && index < otpInputs.length - 1) {
                    otpInputs[index + 1].focus();
                }
            });
            input.addEventListener('keydown', (e) => {
                if (e.key === 'Backspace' && e.target.value.length === 0 && index > 0) {
                    otpInputs[index - 1].focus();
                }
            });
        });
    </script>

</body>
</html>